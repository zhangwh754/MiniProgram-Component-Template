<view class="flex-table">
  <!-- 表头 -->
  <view class="header" bind:tap="onHeaderClick">
    <block wx:for="{{columns}}" wx:key="key">
      <view
        data-index="{{index}}"
        data-key="{{item.key}}"
        class="cell {{scroll ? 'scroll' : ''}}"
        style="width: {{item.width ? item.width + 'rpx' : 'auto'}}"
        >{{item.title}}</view
      >
    </block>
  </view>

  <block wx:if="{{scrollY}}">
    <scroll-view scroll-y="{{true}}" style="height: {{(height || 300) + 'rpx'}}">
      <!-- 表格行 -->
      <MRow
        wx:for="{{dataSource}}"
        wx:key="index"
        rowData="{{item}}"
        rowIndex="{{index}}"
        columns="{{columns}}"
        scroll="{{scroll}}"
        bind:action="handleAction"
      >
        <view
          wx:for="{{columns}}"
          wx:key="columnIndex"
          wx:for-item="column"
          wx:for-index="columnIndex"
          slot="row-{{column.slot}}-{{index}}"
        >
          <slot wx:if="{{column.slot}}" name="{{column.slot}}-{{index}}"></slot>
        </view>
      </MRow>
    </scroll-view>
  </block>
  <block wx:else>
    <!-- 表格行 -->
    <MRow
      wx:for="{{dataSource}}"
      wx:key="index"
      rowData="{{item}}"
      rowIndex="{{index}}"
      columns="{{columns}}"
      scroll="{{scroll}}"
      bind:action="handleAction"
    >
      <view
        wx:for="{{columns}}"
        wx:key="columnIndex"
        wx:for-item="column"
        wx:for-index="columnIndex"
        slot="row-{{column.slot}}-{{index}}"
      >
        <slot wx:if="{{column.slot}}" name="{{column.slot}}-{{index}}"></slot>
      </view>
    </MRow>
  </block>
</view>
